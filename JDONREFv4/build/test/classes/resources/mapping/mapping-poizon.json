{
     "poizon": {
        "_type": {"store": true},
        "_source": {"excludes": ["geometrie"]},
        "properties" : {
                          "poizon_id" : { "type" : "string", "index":"not_analyzed"},
                          "adr_id" : { "type" : "string", "index":"not_analyzed"},
                          "tro_id" : { "type" : "string", "index":"not_analyzed"},
                          "voi_id" : { "type" : "string", "index":"not_analyzed"},
                          "code_insee" : { "type" : "string", "index":"not_analyzed", "copy_to": ["codes"]},
                          "code_insee_commune" : { "type" : "string", "index":"not_analyzed", "copy_to": ["codes"]},
                          "code_departement" : { "type" : "string", "index":"not_analyzed", "copy_to": ["codes"]},
                          "code_pays" : { "type" : "string" ,  "index_analyzer":"jdonrefv4_codes_index","search_analyzer":"jdonrefv4_search"},
                          "codes" : { "type" : "string",  "index_analyzer":"jdonrefv4_codes_index","search_analyzer":"jdonrefv4_search"},
                          "numero" : { "type" : "string", "index":"not_analyzed"},
                          "repetition" : { "type" : "string", "index":"not_analyzed"},
                          "type_de_voie" : { "type" : "string", "index":"not_analyzed"},
                          "article" : { "type" : "string", "index":"not_analyzed"},
                          "libelle" : { "type" : "string", "index":"not_analyzed"},
                          "commune" : { "type" : "string" ,  "index_analyzer":"jdonrefv4_index","search_analyzer":"jdonrefv4_search"},
                          "code_arrondissement" : { "type" : "string", "index":"not_analyzed", "copy_to": ["codes"]},
                          "code_postal" : { "type" : "string", "index":"not_analyzed", "copy_to": ["codes"]},
                          "pays" : { "type" : "string" , "index": "no"},
                          "t0" : { "type" : "date", "format": "YYYY-MM-dd HH:mm:ss", "index":"not_analyzed"},
                          "t1" : { "type" : "date", "format": "YYYY-MM-dd HH:mm:ss", "index":"not_analyzed"},
                          "poizon_service" : { "type" : "integer", "index":"not_analyzed"},
                          "ligne1" : { "type" : "string",  "index_analyzer":"jdonrefv4_index","search_analyzer":"jdonrefv4_search"},
                          "ligne2" : { "type" : "string", "index":"no"},
                          "ligne3" : { "type" : "string", "index":"no"},
                          "ligne4" : { "type" : "string",  "index_analyzer":"jdonrefv4_index","search_analyzer":"jdonrefv4_search"},
                          "ligne5" : { "type" : "string", "index":"no"},
                          "ligne6" : { "type" : "string", "index": "no"},
                          "ligne7" : { "type" : "string",  "index_analyzer":"jdonrefv4_index","search_analyzer":"jdonrefv4_search"},
                          "pin" : { "properties" : { "centroide" : { "type" : "geo_point" , "fielddata" : { "format" : "compressed" , "precision" : "1cm"}}}},
                          "geometrie" : { "type" : "geo_shape", "precision": "1cm", "tree": "quadtree"},
                          "score" : { "type" : "string", "term_vector":"yes", "index":"analyzed" , "analyzer":"jdonrefv4_score_analyzer"}
      },
        "transform": {
          "lang" : "groovy",
          "script" : "ctx._source['score']= ''; if (ctx._source['ligne1']!=null) { def tokens= ctx._source['ligne1'].split(' '); for(x in tokens) ctx._source['score'] += ' ' + x + '|11'; }; if (ctx._source['ligne4']!=null) { def tokens= ctx._source['ligne4'].split(' '); for(x in tokens) ctx._source['score'] += ' ' + x + '|12'; }; if (ctx._source['ligne6']!=null) { def tokens= ctx._source['ligne6'].split(' '); for(x in tokens) ctx._source['score'] += ' ' + x + '|13'; }; if (ctx._source['ligne7']!=null) { def tokens= ctx._source['ligne7'].split(' '); for(x in tokens) ctx._source['score'] += ' ' + x + '|14'; };"
        }
    }
  }